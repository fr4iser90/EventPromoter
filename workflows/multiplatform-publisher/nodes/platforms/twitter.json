[
  {
    "id": "platform-twitter-check",
    "name": "üê¶ Has Twitter Content?",
    "type": "if",
    "parameters": {
      "conditions": {
        "boolean": [
          {
            "value1": "={{ $json.twitter !== undefined }}",
            "value2": true
          }
        ]
      }
    },
    "position": [200, -200],
    "typeVersion": 2
  },
  {
    "id": "platform-twitter-post",
    "name": "üê¶ Post to Twitter/X",
    "type": "twitter",
    "parameters": {
      "resource": "tweet",
      "text": "={{ $json.twitter.text }}",
      "additionalFields": {}
    },
    "position": [400, -200],
    "onError": "continueRegularOutput",
    "typeVersion": 2
  },
  {
    "id": "platform-twitter-emit-started",
    "name": "üì° Emit Twitter Started",
    "type": "httpRequest",
    "parameters": {
      "method": "POST",
      "url": "={{ $json.callbackUrl || $json.metadata?.callbackUrl || 'http://localhost:3000/api/publish/event' }}",
      "sendBody": true,
      "specifyBody": "json",
      "jsonBody": "={{ { sessionId: $json.sessionId || $json.metadata?.sessionId || $json.metadata?.eventData?.sessionId, publishRunId: $json.publishRunId || $json.metadata?.publishRunId || $json.metadata?.eventData?.publishRunId, type: 'step_started', platform: 'twitter', method: 'n8n', step: 'publish.submit', message: 'Starting publish.submit via n8n', timestamp: $now.toISO() } }}",
      "options": {}
    },
    "position": [300, -260],
    "typeVersion": 4.2
  },
  {
    "id": "platform-twitter-emit-completed",
    "name": "‚úÖ Emit Twitter Completed",
    "type": "httpRequest",
    "parameters": {
      "method": "POST",
      "url": "={{ $json.callbackUrl || $json.metadata?.callbackUrl || 'http://localhost:3000/api/publish/event' }}",
      "sendBody": true,
      "specifyBody": "json",
      "jsonBody": "={{ { sessionId: $json.sessionId || $json.metadata?.sessionId || $json.metadata?.eventData?.sessionId, publishRunId: $json.publishRunId || $json.metadata?.publishRunId || $json.metadata?.eventData?.publishRunId, type: 'step_completed', platform: 'twitter', method: 'n8n', step: 'publish.submit', duration: 0, data: { postId: $json.id || $json.data?.id, url: $json.url || $json.link }, timestamp: $now.toISO() } }}",
      "options": {}
    },
    "position": [520, -200],
    "typeVersion": 4.2
  },
  {
    "id": "platform-twitter-check-failed",
    "name": "‚ö†Ô∏è Twitter Publish Failed?",
    "type": "if",
    "parameters": {
      "conditions": {
        "boolean": [
          {
            "value1": "={{ $json.error !== undefined || $json.errorMessage !== undefined || $json.success === false }}",
            "value2": true
          }
        ]
      }
    },
    "position": [460, -140],
    "typeVersion": 2
  },
  {
    "id": "platform-twitter-emit-failed",
    "name": "‚ùå Emit Twitter Failed",
    "type": "httpRequest",
    "parameters": {
      "method": "POST",
      "url": "={{ $json.callbackUrl || $json.metadata?.callbackUrl || 'http://localhost:3000/api/publish/event' }}",
      "sendBody": true,
      "specifyBody": "json",
      "jsonBody": "={{ { sessionId: $json.sessionId || $json.metadata?.sessionId || $json.metadata?.eventData?.sessionId, publishRunId: $json.publishRunId || $json.metadata?.publishRunId || $json.metadata?.eventData?.publishRunId, type: 'step_failed', platform: 'twitter', method: 'n8n', step: 'publish.submit', error: $json.error?.message || $json.error || $json.errorMessage || 'Twitter publish failed', errorCode: 'N8N_NODE_ERROR', retryable: false, timestamp: $now.toISO() } }}",
      "options": {}
    },
    "position": [640, -120],
    "typeVersion": 4.2
  },
  {
    "id": "platform-twitter-verify-emit-started",
    "name": "üì° Emit Twitter Verify Started",
    "type": "httpRequest",
    "parameters": {
      "method": "POST",
      "url": "={{ $json.callbackUrl || $json.metadata?.callbackUrl || 'http://localhost:3000/api/publish/event' }}",
      "sendBody": true,
      "specifyBody": "json",
      "jsonBody": "={{ { sessionId: $json.sessionId || $json.metadata?.sessionId || $json.metadata?.eventData?.sessionId, publishRunId: $json.publishRunId || $json.metadata?.publishRunId || $json.metadata?.eventData?.publishRunId, type: 'step_started', platform: 'twitter', method: 'n8n', step: 'publish.verify_result', message: 'Starting publish.verify_result via n8n', timestamp: $now.toISO() } }}",
      "options": {}
    },
    "position": [760, -220],
    "typeVersion": 4.2
  },
  {
    "id": "platform-twitter-verify-check",
    "name": "üîé Verify Twitter Result",
    "type": "if",
    "parameters": {
      "conditions": {
        "boolean": [
          {
            "value1": "={{ $json.id !== undefined || $json.data?.id !== undefined || $json.url !== undefined || $json.link !== undefined }}",
            "value2": true
          }
        ]
      }
    },
    "position": [940, -200],
    "typeVersion": 2
  },
  {
    "id": "platform-twitter-verify-emit-completed",
    "name": "‚úÖ Emit Twitter Verify Completed",
    "type": "httpRequest",
    "parameters": {
      "method": "POST",
      "url": "={{ $json.callbackUrl || $json.metadata?.callbackUrl || 'http://localhost:3000/api/publish/event' }}",
      "sendBody": true,
      "specifyBody": "json",
      "jsonBody": "={{ { sessionId: $json.sessionId || $json.metadata?.sessionId || $json.metadata?.eventData?.sessionId, publishRunId: $json.publishRunId || $json.metadata?.publishRunId || $json.metadata?.eventData?.publishRunId, type: 'step_completed', platform: 'twitter', method: 'n8n', step: 'publish.verify_result', duration: 0, data: { verified: true }, timestamp: $now.toISO() } }}",
      "options": {}
    },
    "position": [1120, -240],
    "typeVersion": 4.2
  },
  {
    "id": "platform-twitter-verify-emit-failed",
    "name": "‚ùå Emit Twitter Verify Failed",
    "type": "httpRequest",
    "parameters": {
      "method": "POST",
      "url": "={{ $json.callbackUrl || $json.metadata?.callbackUrl || 'http://localhost:3000/api/publish/event' }}",
      "sendBody": true,
      "specifyBody": "json",
      "jsonBody": "={{ { sessionId: $json.sessionId || $json.metadata?.sessionId || $json.metadata?.eventData?.sessionId, publishRunId: $json.publishRunId || $json.metadata?.publishRunId || $json.metadata?.eventData?.publishRunId, type: 'step_failed', platform: 'twitter', method: 'n8n', step: 'publish.verify_result', error: 'Could not verify Twitter publish result', errorCode: 'VERIFY_RESULT_FAILED', retryable: false, timestamp: $now.toISO() } }}",
      "options": {}
    },
    "position": [1120, -140],
    "typeVersion": 4.2
  }
]
