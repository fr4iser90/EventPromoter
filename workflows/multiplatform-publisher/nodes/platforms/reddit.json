[
  {
    "id": "platform-reddit-check",
    "name": "ðŸ”´ Has Reddit Content?",
    "type": "if",
    "parameters": {
      "conditions": {
        "boolean": [
          {
            "value1": "={{ $json.reddit !== undefined }}",
            "value2": true
          }
        ]
      }
    },
    "position": [200, 800],
    "typeVersion": 2
  },
  {
    "id": "platform-reddit-post",
    "name": "ðŸ”´ Post to Reddit",
    "type": "n8n-nodes-base.reddit",
    "parameters": {
      "resource": "post",
      "subreddit": "={{ $json.reddit.subreddit }}",
      "title": "={{ $json.reddit.title }}",
      "text": "={{ $json.reddit.text }}",
      "additionalFields": {}
    },
    "position": [400, 800],
    "typeVersion": 1
  },
  {
    "id": "platform-reddit-emit-started",
    "name": "ðŸ“¡ Emit Reddit Started",
    "type": "httpRequest",
    "parameters": {
      "method": "POST",
      "url": "={{ $json.callbackUrl || $json.metadata?.callbackUrl || 'http://localhost:3001/api/publish/event' }}",
      "sendBody": true,
      "specifyBody": "json",
      "jsonBody": "={{ { sessionId: $json.sessionId || $json.metadata?.sessionId || $json.metadata?.eventData?.sessionId, publishRunId: $json.publishRunId || $json.metadata?.publishRunId || $json.metadata?.eventData?.publishRunId, type: 'step_started', platform: 'reddit', method: 'n8n', step: 'publish.submit', message: 'Starting publish.submit via n8n', timestamp: $now.toISO() } }}",
      "options": {}
    },
    "position": [300, 740],
    "typeVersion": 4.2
  },
  {
    "id": "platform-reddit-emit-completed",
    "name": "âœ… Emit Reddit Completed",
    "type": "httpRequest",
    "parameters": {
      "method": "POST",
      "url": "={{ $json.callbackUrl || $json.metadata?.callbackUrl || 'http://localhost:3001/api/publish/event' }}",
      "sendBody": true,
      "specifyBody": "json",
      "jsonBody": "={{ { sessionId: $json.sessionId || $json.metadata?.sessionId || $json.metadata?.eventData?.sessionId, publishRunId: $json.publishRunId || $json.metadata?.publishRunId || $json.metadata?.eventData?.publishRunId, type: 'step_completed', platform: 'reddit', method: 'n8n', step: 'publish.submit', duration: 0, data: { postId: $json.id || $json.name, url: $json.url || $json.permalink }, timestamp: $now.toISO() } }}",
      "options": {}
    },
    "position": [520, 800],
    "typeVersion": 4.2
  }
]
